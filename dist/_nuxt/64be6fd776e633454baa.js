(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{244:function(t,e,n){t.exports=n.p+"img/fab956e.svg"},249:function(t,e,n){t.exports=n.p+"img/f3a5f23.svg"},295:function(t,e,n){var content=n(328);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("e223568c",content,!0,{sourceMap:!1})},327:function(t,e,n){"use strict";var o=n(295);n.n(o).a},328:function(t,e,n){(t.exports=n(10)(!1)).push([t.i,".disabled[data-v-4afbf724]{pointer-events:none}",""])},365:function(t,e,n){"use strict";n.r(e);n(44),n(20),n(21),n(16),n(36),n(22),n(66),n(90);var o=n(17);function r(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(source,!0).forEach(function(e){Object(o.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):r(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}var l={name:"Create",layout:"Manage",middleware:"validate",data:function(){return{states:[]}},asyncData:function(t){var e=t.$axios,n=t.route;t.store;return e.$get("event/findone/".concat(n.query.id)).then(function(t){return{sellTicket:!0,privateEvent:!1,showCategory:!1,selectedCategoryName:null,ticketTypeNo:null,categories:[],showFilteredLocation:!1,userEnteredLocation:t.event.location,filteredLocation:[],originalTicketLength:null,event:c({},t.event)}}).catch(function(t){return console.log(t)})},watch:{userEnteredLocation:function(t){var e=this;this.userEnteredLocation.length<=0?(this.showFilteredLocation=!1,this.filteredLocation=[]):(this.filteredLocation=this.states.filter(function(n){return n.name.includes(e.toUpperCase(t))}),this.showFilteredLocation=this.filteredLocation.length>0)}},methods:{toUpperCase:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},selectLocation:function(t){var e=this;this.userEnteredLocation=t.name,this.event.location=t.name,setTimeout(function(){e.showFilteredLocation=!1},100)},updateCategoryName:function(){var t=this;return this.selectedCategoryName=this.categories.filter(function(e){return e._id===t.event.category})[0].category_name},add:function(){this.event.number_of_attendees=parseInt(this.event.number_of_attendees)+1},minus:function(){this.event.number_of_attendees>1&&(this.event.number_of_attendees-=1)},addTicketType:function(){this.event.tickets.push({name:"",price:"",description:""})},removeTicketType:function(){this.event.tickets.length>this.originalTicketLength&&this.event.tickets.pop()},togglePrivateType:function(t){this.privateEvent="private"===t,this.event.event_type="private"===t?"private":"public"},editWebsite:function(){var t=this;this.$store.dispatch("event/updateEvent",c({},this.event)).then(function(e){t.$router.push("/manage/website/"+t.event._id)}).catch(function(t){return console.log(t+"error")})},updateEvent:function(){var t=this;this.$store.dispatch("event/updateEvent",c({},this.event)).then(function(){t.$toast.show("Your event was updated succesfully!",{type:"error"})}).catch(function(t){return console.log(t)})},selectCategory:function(t){this.showCategory=!1,this.selectedCategoryName=t.name,this.event.category=t.id}},mounted:function(){var t=this;this.$axios.$get("/category/getAll").then(function(e){var n=e.categories;t.categories=n,t.updateCategoryName()}).catch(function(t){return console.log(t)}),this.privateEvent="private"===this.event.event_type,this.originalTicketLength=this.event.tickets.length,this.$axios.$get("/event/returnState").then(function(e){return t.states=e}).catch(function(t){return console.log(t)})}},v=(n(327),n(2)),component=Object(v.a)(l,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"container",attrs:{id:"create-page"}},[o("div",{staticClass:"intro"},[o("div",{staticClass:"mobile"},[o("a",{staticClass:"save-btn",on:{click:function(e){return e.preventDefault(),t.updateEvent(e)}}},[o("img",{attrs:{src:n(244)}})]),t._v(" "),o("a",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.editWebsite(e)}}},[t._v("Edit Website")])]),t._v(" "),o("div",{staticClass:"info"},[o("div",{staticClass:"left"},[o("nuxt-link",{attrs:{to:"/manage"}},[o("img",{staticStyle:{width:"20px"},attrs:{src:n(249)}})]),t._v(" "),o("h3",{staticClass:"title desktop"},[t._v(t._s(t.event.event_name))]),t._v(" "),o("h3",{staticClass:"title"},[t._v("Update event")]),t._v(" "),o("p",{staticClass:"sub"},[t._v("Update your event")])],1),t._v(" "),o("div",{staticClass:"right"},[o("a",{staticClass:"btn save",on:{click:function(e){return e.preventDefault(),t.updateEvent(e)}}},[t._v("Update event")]),t._v(" "),o("a",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.editWebsite(e)}}},[t._v("Edit Website")])])])]),t._v(" "),o("form",[o("div",{staticClass:"form"},[o("div",{staticClass:"top"},[o("div",{staticClass:"left"},[o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.event.event_name,expression:"event.event_name"}],attrs:{type:"text",placeholder:"Title of your event"},domProps:{value:t.event.event_name},on:{input:function(e){e.target.composing||t.$set(t.event,"event_name",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-group cat"},[o("div",{staticClass:"category",on:{click:function(e){t.showCategory=!t.showCategory}}},[t._v("\n              "+t._s(t.selectedCategoryName?t.selectedCategoryName:"Select Category")+"\n            ")]),t._v(" "),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.showCategory,expression:"showCategory"}],staticClass:"category-options-wrapper"},t._l(t.categories,function(e){return o("div",{staticClass:"category-options",on:{click:function(n){return t.selectCategory({id:e._id,name:e.category_name})}}},[t._v("\n                  "+t._s(e.category_name)+"\n                ")])}),0)])],1),t._v(" "),o("div",{staticClass:"form-group states"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.userEnteredLocation,expression:"userEnteredLocation"}],attrs:{type:"text",placeholder:"Location. eg. Lagos"},domProps:{value:t.userEnteredLocation},on:{input:function(e){e.target.composing||(t.userEnteredLocation=e.target.value)}}}),t._v(" "),o("transition",{attrs:{name:"fade"}},[t.showFilteredLocation?o("div",{staticClass:"states-wrapper"},t._l(t.filteredLocation,function(e,i){return o("span",{key:i,staticClass:"state",on:{click:function(n){return t.selectLocation(e)}}},[t._v(t._s(e.name))])}),0):t._e()])],1),t._v(" "),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.event.address,expression:"event.address"}],attrs:{type:"text",placeholder:"Address"},domProps:{value:t.event.address},on:{input:function(e){e.target.composing||t.$set(t.event,"address",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"right"},[o("div",{staticClass:"form-group text desktop"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.event.about_event,expression:"event.about_event"}],staticClass:"desc",attrs:{placeholder:"Describe your event"},domProps:{value:t.event.about_event},on:{input:function(e){e.target.composing||t.$set(t.event,"about_event",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"right-bottom"},[o("div",{staticClass:"form-group"},[o("datetime",{staticClass:"input theme-blue",staticStyle:{cursor:"pointer"},attrs:{placeholder:"Start date",type:"date","input-class":"select","use12-hour":""},model:{value:t.event.start_date,callback:function(e){t.$set(t.event,"start_date",e)},expression:"event.start_date"}})],1),t._v(" "),o("div",{staticClass:"form-group"},[o("datetime",{staticClass:"input theme-blue",staticStyle:{cursor:"pointer"},attrs:{placeholder:"Start time","minute-step":"15",type:"time","use12-hour":"","input-class":"select"},model:{value:t.event.start_time,callback:function(e){t.$set(t.event,"start_time",e)},expression:"event.start_time"}})],1),t._v(" "),o("div",{staticClass:"form-group"},[o("datetime",{staticClass:"input theme-blue",staticStyle:{cursor:"pointer"},attrs:{placeholder:"End date",type:"date","input-class":"select"},model:{value:t.event.end_date,callback:function(e){t.$set(t.event,"end_date",e)},expression:"event.end_date"}})],1),t._v(" "),o("div",{staticClass:"form-group"},[o("datetime",{staticClass:"input theme-blue",staticStyle:{cursor:"pointer"},attrs:{placeholder:"End time","minute-step":"15",type:"time","use12-hour":"","input-class":"select"},model:{value:t.event.end_time,callback:function(e){t.$set(t.event,"end_time",e)},expression:"event.end_time"}})],1)])]),t._v(" "),o("div",{staticClass:"form-group text mobile"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.event.about_event,expression:"event.about_event"}],staticClass:"desc",attrs:{placeholder:"Describe your event"},domProps:{value:t.event.about_event},on:{input:function(e){e.target.composing||t.$set(t.event,"about_event",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"bottom"},[o("div",{staticClass:"tickets"},[o("p",{staticClass:"heading"},[t._v("Create event ticket")]),t._v(" "),o("div",{staticClass:"question"},[o("p",[t._v(" What kind of event is this? ")]),t._v(" "),o("div",{staticClass:"answer"},[o("span",{staticClass:"option",class:{selected:!t.privateEvent},on:{click:function(e){return t.togglePrivateType("public")}}},[t._v("Public")]),t._v(" "),o("span",{staticClass:"option",class:{selected:t.privateEvent},on:{click:function(e){return t.togglePrivateType("private")}}},[t._v("Private")])])]),t._v(" "),o("div",{staticClass:"question"},[o("p",[t._v(" How many people are you expecting ")]),t._v(" "),o("div",{staticClass:"expectation"},[o("span",{staticClass:"minus",on:{click:t.minus}},[t._v(" - ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.event.number_of_attendees,expression:"event.number_of_attendees"}],staticClass:"display",domProps:{value:t.event.number_of_attendees},on:{input:function(e){e.target.composing||t.$set(t.event,"number_of_attendees",e.target.value)}}}),t._v(" "),o("span",{staticClass:"add",on:{click:t.add}},[t._v(" + ")])])])]),t._v(" "),o("div",{staticClass:"connect"},[o("p",{staticClass:"heading"},[t._v("Connect")]),t._v(" "),o("p",{staticClass:"sub"},[t._v("Upload your Social contact here")]),t._v(" "),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.event.youtube_link,expression:"event.youtube_link"}],attrs:{type:"text",placeholder:"YouTube embedded link"},domProps:{value:t.event.youtube_link},on:{input:function(e){e.target.composing||t.$set(t.event,"youtube_link",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.event.instagram_link,expression:"event.instagram_link"}],attrs:{type:"text",placeholder:"Instagram page link"},domProps:{value:t.event.instagram_link},on:{input:function(e){e.target.composing||t.$set(t.event,"instagram_link",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.event.facebook_link,expression:"event.facebook_link"}],attrs:{type:"text",placeholder:"Facebook page link"},domProps:{value:t.event.facebook_link},on:{input:function(e){e.target.composing||t.$set(t.event,"facebook_link",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.event.twitter_link,expression:"event.twitter_link"}],attrs:{type:"text",placeholder:"Twitter page link"},domProps:{value:t.event.twitter_link},on:{input:function(e){e.target.composing||t.$set(t.event,"twitter_link",e.target.value)}}})])])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.sellTicket,expression:"sellTicket"}],staticClass:"pricing"},[o("div",{staticClass:"top"},[o("p",{staticClass:"sub"},[t._v(" Add more ticket types ")]),t._v(" "),o("div",{staticClass:"expectation"},[o("span",{staticClass:"minus",on:{click:t.removeTicketType}},[t._v(" - ")]),t._v(" "),t.ticketTypeNo?o("input",{staticClass:"display",attrs:{disabled:""},domProps:{value:t.ticketTypeNo}}):o("input",{staticClass:"display",attrs:{disabled:""},domProps:{value:t.event.tickets.length}}),t._v(" "),o("span",{staticClass:"add",on:{click:t.addTicketType}},[t._v(" + ")])])]),t._v(" "),o("div",{staticClass:"ticket-row-wrapper"},t._l(t.event.tickets,function(e,i){return o("div",{key:i,staticClass:"ticket-row"},[o("div",{staticClass:"form-group"},[o("span",{staticClass:"label"},[t._v("Ticket Name")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"ticket_type.name"}],class:{disabled:i<t.originalTicketLength},attrs:{type:"text",placeholder:"Eg. Premium ticket"},domProps:{value:e.name},on:{input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-group"},[o("span",{staticClass:"label"},[t._v("Ticket Price")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.number",value:e.price,expression:"ticket_type.price",modifiers:{number:!0}}],class:{disabled:i<t.originalTicketLength},attrs:{type:"number"},domProps:{value:e.price},on:{input:function(n){n.target.composing||t.$set(e,"price",t._n(n.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),o("div",{staticClass:"form-group"},[o("span",{staticClass:"label"},[t._v("Ticket Description")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"ticket_type.description"}],class:{disabled:i<t.originalTicketLength},attrs:{type:"text"},domProps:{value:e.description},on:{input:function(n){n.target.composing||t.$set(e,"description",n.target.value)}}})])])}),0)]),t._v(" "),o("p",{staticClass:"yay"},[t._v("\n        Yay! You're almost there.\n      ")]),t._v(" "),o("div",{staticClass:"mobile bottom"},[o("a",{staticClass:"save-btn",on:{click:t.updateEvent}},[o("img",{attrs:{src:n(244)}})]),t._v(" "),o("a",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.editWebsite(e)}}},[t._v("Edit Website")])]),t._v(" "),o("div",{staticClass:"proceed"},[o("a",{staticClass:"btn save",on:{click:t.updateEvent}},[o("img",{attrs:{src:n(244),alt:""}})]),t._v(" "),o("a",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.editWebsite(e)}}},[t._v("Edit Website")])])])])])},[],!1,null,"4afbf724",null);e.default=component.exports}}]);