(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{244:function(e,t,n){e.exports=n.p+"img/fab956e.svg"},249:function(e,t,n){e.exports=n.p+"img/f3a5f23.svg"},364:function(e,t,n){"use strict";n.r(t);n(44),n(20),n(21),n(16),n(36),n(22);var o=n(17);n(66),n(90),n(28);function r(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable})),t.push.apply(t,n)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(source,!0).forEach(function(t){Object(o.a)(e,t,source[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):r(source).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))})}return e}var l={name:"Create",layout:"Manage",components:{Loader:n(29).a},data:function(){return{sellTicket:!0,privateEvent:!1,showCategory:!1,selectedCategoryName:null,ticketTypeNo:null,categories:[],processing:!1,showFilteredLocation:!1,userEnteredLocation:"",filteredLocation:[],states:["Lagos","Abuja","Markurdi","Ogun","Kaduna","Katsina","Ondo","Anambra"],event:{easy_id:this.$store.getters.getUser.id,easy_apikey:this.$store.getters.getUser.apiKey,event_name:"",category:"",location:"",address:"",start_time:"",start_date:"",end_date:"",end_time:"",about_event:"",facebook_link:"",twitter_link:"",instagram_link:"",youtube_link:"",selling_ticket_status:1,event_type:"public",number_of_attendees:1,tickets:[{name:"",price:"",description:""}]}}},watch:{userEnteredLocation:function(e){var t=this;this.userEnteredLocation.length<=0?(this.showFilteredLocation=!1,this.filteredLocation=[]):(this.filteredLocation=this.states.filter(function(n){return n.includes(t.toUpperCase(e))}),this.showFilteredLocation=!0)}},methods:{toUpperCase:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},selectLocation:function(e){var t=this;this.userEnteredLocation=e,this.event.location=e,setTimeout(function(){t.showFilteredLocation=!1},100)},add:function(){this.event.number_of_attendees=parseInt(this.event.number_of_attendees)+1},minus:function(){this.event.number_of_attendees>1&&(this.event.number_of_attendees-=1)},addTicketType:function(){this.event.tickets.push({name:"",price:"",description:""})},removeTicketType:function(){this.event.tickets.length>1&&this.event.tickets.pop()},togglePrivateType:function(e){this.privateEvent="private"===e,this.event.event_type="private"===e?"private":"public"},saveEvent:function(){var e=this;this.processing=!0,this.$store.dispatch("event/createEvent",c({},this.event)).then(function(t){e.processing=!1,e.$toast.show("Your event was saved successfully!",{type:"error"})}).catch(function(e){return console.log(e)})},postEvent:function(){var e=this;this.processing=!0,this.$store.dispatch("event/createEvent",c({},this.event)).then(function(t){!0===t.error&&e.$toast.show("An error occured. Please try again",{type:"error"}),e.processing=!1,e.$toast.show("Event saved. redirecting to website",{onComplete:function(){e.$router.push("/manage/website/"+t.event._id)},type:"error"})}).catch(function(e){return console.log(e)})},selectCategory:function(e){this.showCategory=!1,this.selectedCategoryName=e.name,this.event.category=e.id}},mounted:function(){var e=this;this.$axios.$get("/category/getAll").then(function(t){var n=t.categories;console.log(n),e.categories=n}).catch(function(e){return console.log(e)})}},v=n(2),component=Object(v.a)(l,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"container",attrs:{id:"create-page"}},[e.processing?o("Loader"):e._e(),e._v(" "),o("div",{staticClass:"intro"},[o("div",{staticClass:"mobile"},[o("a",{staticClass:"save-btn",on:{click:e.saveEvent}},[o("img",{attrs:{src:n(244)}})]),e._v(" "),o("a",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.postEvent(t)}}},[e._v("Publish")])]),e._v(" "),o("div",{staticClass:"info"},[o("div",{staticClass:"left"},[o("nuxt-link",{attrs:{to:"/manage"}},[o("img",{staticStyle:{width:"20px"},attrs:{src:n(249)}})]),e._v(" "),o("h3",{staticClass:"title desktop"},[e._v("Create your free event")]),e._v(" "),o("h3",{staticClass:"title"},[e._v("Create event")]),e._v(" "),o("p",{staticClass:"sub"},[e._v("Create your event in less than 5 mins")])],1),e._v(" "),o("div",{staticClass:"right"},[o("a",{staticClass:"btn save",on:{click:e.saveEvent}},[o("img",{attrs:{src:n(244),alt:""}})]),e._v(" "),o("a",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.postEvent(t)}}},[e._v("Publish")])])])]),e._v(" "),o("form",[o("div",{staticClass:"form"},[o("div",{staticClass:"top"},[o("div",{staticClass:"left"},[o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.event.event_name,expression:"event.event_name"}],attrs:{type:"text",placeholder:"Title of your event"},domProps:{value:e.event.event_name},on:{input:function(t){t.target.composing||e.$set(e.event,"event_name",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"form-group cat"},[o("div",{staticClass:"category",on:{click:function(t){e.showCategory=!e.showCategory}}},[e._v("\n              "+e._s(e.selectedCategoryName?e.selectedCategoryName:"Select Category")+"\n            ")]),e._v(" "),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showCategory,expression:"showCategory"}],staticClass:"category-options-wrapper"},e._l(e.categories,function(t){return o("div",{staticClass:"category-options",on:{click:function(n){return e.selectCategory({id:t._id,name:t.category_name})}}},[e._v("\n                  "+e._s(t.category_name)+"\n                ")])}),0)])],1),e._v(" "),o("div",{staticClass:"form-group states"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.userEnteredLocation,expression:"userEnteredLocation"}],attrs:{type:"text",placeholder:"Location. eg. Lagos"},domProps:{value:e.userEnteredLocation},on:{input:function(t){t.target.composing||(e.userEnteredLocation=t.target.value)}}}),e._v(" "),o("transition",{attrs:{name:"fade"}},[e.showFilteredLocation?o("div",{staticClass:"states-wrapper"},e._l(e.filteredLocation,function(t,i){return o("span",{key:i,staticClass:"state",on:{click:function(n){return e.selectLocation(t)}}},[e._v(e._s(t))])}),0):e._e()])],1),e._v(" "),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.event.address,expression:"event.address"}],attrs:{type:"text",placeholder:"Address"},domProps:{value:e.event.address},on:{input:function(t){t.target.composing||e.$set(e.event,"address",t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"right"},[o("div",{staticClass:"form-group text desktop"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.event.about_event,expression:"event.about_event"}],staticClass:"desc",attrs:{placeholder:"Describe your event"},domProps:{value:e.event.about_event},on:{input:function(t){t.target.composing||e.$set(e.event,"about_event",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"right-bottom"},[o("div",{staticClass:"form-group"},[o("datetime",{staticClass:"input theme-blue",staticStyle:{cursor:"pointer"},attrs:{placeholder:"Start date",type:"date","input-class":"select","use12-hour":""},model:{value:e.event.start_date,callback:function(t){e.$set(e.event,"start_date",t)},expression:"event.start_date"}})],1),e._v(" "),o("div",{staticClass:"form-group"},[o("datetime",{staticClass:"input theme-blue",staticStyle:{cursor:"pointer"},attrs:{placeholder:"Start time",type:"time","use12-hour":"","input-class":"select","minute-step":"15"},model:{value:e.event.start_time,callback:function(t){e.$set(e.event,"start_time",t)},expression:"event.start_time"}})],1),e._v(" "),o("div",{staticClass:"form-group"},[o("datetime",{staticClass:"input theme-blue",staticStyle:{cursor:"pointer"},attrs:{placeholder:"End date",type:"date","input-class":"select"},model:{value:e.event.end_date,callback:function(t){e.$set(e.event,"end_date",t)},expression:"event.end_date"}})],1),e._v(" "),o("div",{staticClass:"form-group"},[o("datetime",{staticClass:"input theme-blue",staticStyle:{cursor:"pointer"},attrs:{placeholder:"End time","minute-step":"15",type:"time","use12-hour":"","input-class":"select"},model:{value:e.event.end_time,callback:function(t){e.$set(e.event,"end_time",t)},expression:"event.end_time"}})],1)])]),e._v(" "),o("div",{staticClass:"form-group text mobile"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.event.about_event,expression:"event.about_event"}],staticClass:"desc",attrs:{placeholder:"Describe your event"},domProps:{value:e.event.about_event},on:{input:function(t){t.target.composing||e.$set(e.event,"about_event",t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"bottom"},[o("div",{staticClass:"tickets"},[o("p",{staticClass:"heading"},[e._v("Create event ticket")]),e._v(" "),o("div",{staticClass:"question"},[o("p",[e._v(" What kind of event is this? ")]),e._v(" "),o("div",{staticClass:"answer"},[o("span",{staticClass:"option",class:{selected:!e.privateEvent},on:{click:function(t){return e.togglePrivateType("public")}}},[e._v("Public")]),e._v(" "),o("span",{staticClass:"option",class:{selected:e.privateEvent},on:{click:function(t){return e.togglePrivateType("private")}}},[e._v("Private")])])]),e._v(" "),o("div",{staticClass:"question"},[o("p",[e._v(" How many people are you expecting ")]),e._v(" "),o("div",{staticClass:"expectation"},[o("span",{staticClass:"minus",on:{click:e.minus}},[e._v(" - ")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.event.number_of_attendees,expression:"event.number_of_attendees"}],staticClass:"display",domProps:{value:e.event.number_of_attendees},on:{input:function(t){t.target.composing||e.$set(e.event,"number_of_attendees",t.target.value)}}}),e._v(" "),o("span",{staticClass:"add",on:{click:e.add}},[e._v(" + ")])])])]),e._v(" "),o("div",{staticClass:"connect"},[o("p",{staticClass:"heading"},[e._v("Connect")]),e._v(" "),o("p",{staticClass:"sub"},[e._v("Upload your Social contact here")]),e._v(" "),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.event.youtube_link,expression:"event.youtube_link"}],attrs:{type:"text",placeholder:"YouTube embedded link"},domProps:{value:e.event.youtube_link},on:{input:function(t){t.target.composing||e.$set(e.event,"youtube_link",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.event.instagram_link,expression:"event.instagram_link"}],attrs:{type:"text",placeholder:"Instagram page link"},domProps:{value:e.event.instagram_link},on:{input:function(t){t.target.composing||e.$set(e.event,"instagram_link",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.event.facebook_link,expression:"event.facebook_link"}],attrs:{type:"text",placeholder:"Facebook page link"},domProps:{value:e.event.facebook_link},on:{input:function(t){t.target.composing||e.$set(e.event,"facebook_link",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.event.twitter_link,expression:"event.twitter_link"}],attrs:{type:"text",placeholder:"Twitter page link"},domProps:{value:e.event.twitter_link},on:{input:function(t){t.target.composing||e.$set(e.event,"twitter_link",t.target.value)}}})])])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.sellTicket,expression:"sellTicket"}],staticClass:"pricing"},[o("div",{staticClass:"top"},[e._m(0),e._v(" "),o("div",{staticClass:"expectation"},[o("span",{staticClass:"minus",on:{click:e.removeTicketType}},[e._v(" - ")]),e._v(" "),e.ticketTypeNo?o("input",{staticClass:"display",attrs:{disabled:""},domProps:{value:e.ticketTypeNo}}):o("input",{staticClass:"display",attrs:{disabled:""},domProps:{value:e.event.tickets.length}}),e._v(" "),o("span",{staticClass:"add",on:{click:e.addTicketType}},[e._v(" + ")])])]),e._v(" "),o("div",{staticClass:"ticket-row-wrapper"},e._l(e.event.tickets,function(t,i){return o("div",{key:i,staticClass:"ticket-row"},[o("div",{staticClass:"form-group"},[o("span",{staticClass:"label"},[e._v("Ticket Name")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"ticket_type.name"}],attrs:{type:"text",placeholder:"Eg. Premium ticket"},domProps:{value:t.name},on:{input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}})]),e._v(" "),o("div",{staticClass:"form-group"},[o("span",{staticClass:"label"},[e._v("Ticket Price")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.number",value:t.price,expression:"ticket_type.price",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.price},on:{input:function(n){n.target.composing||e.$set(t,"price",e._n(n.target.value))},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),o("div",{staticClass:"form-group"},[o("span",{staticClass:"label"},[e._v("Ticket Description")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"ticket_type.description"}],attrs:{type:"text"},domProps:{value:t.description},on:{input:function(n){n.target.composing||e.$set(t,"description",n.target.value)}}})])])}),0)]),e._v(" "),o("p",{staticClass:"yay"},[e._v("\n        Yay! You're almost there.\n      ")]),e._v(" "),o("div",{staticClass:"mobile bottom"},[o("a",{staticClass:"save-btn",on:{click:e.saveEvent}},[o("img",{attrs:{src:n(244)}})]),e._v(" "),o("a",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.postEvent(t)}}},[e._v("Publish")])]),e._v(" "),o("div",{staticClass:"proceed"},[o("a",{staticClass:"btn save",on:{click:e.saveEvent}},[o("img",{attrs:{src:n(244),alt:""}})]),e._v(" "),o("a",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.postEvent(t)}}},[e._v("Publish")])])])])],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"sub"},[this._v(" Choose other ticket types "),t("small",[this._v("*Tickets cannot be edited after creation")])])}],!1,null,"2adc77cf",null);t.default=component.exports}}]);